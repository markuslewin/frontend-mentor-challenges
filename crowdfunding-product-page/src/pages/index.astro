---
import "../styles/global.css";
import Icon from "../components/Icon.astro";
import rewards from "../data/rewards.json";
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link rel="preload" href="/sprite.svg" as="image" />
    <title>Frontend Mentor | Crowdfunding product page</title>
  </head>
  <body>
    <header class="[ header ] [ center repel ]">
      <Icon alt="Crowdfund" name="logo" width={128} height={20} />
      <nav>
        <!-- <button>
          <img alt="" src="/images/icon-hamburger.svg" />
          <img alt="" src="/images/icon-close-menu.svg" />
          Menu
        </button> -->
        <ul class="cluster" role="list">
          <li>
            <a href="/about">About</a>
          </li>
          <li>
            <a href="/about">Discover</a>
          </li>
          <li>
            <a href="/about">Get Started</a>
          </li>
        </ul>
      </nav>
    </header>
    <main>
      <picture class="[ hero ] [ center ] [ -mb-21 tablet:-mb-30 ]">
        <source
          media="(min-width: 40em)"
          srcset="/images/image-hero-desktop.jpg"
          width="1440"
          height="400"
        />
        <img
          alt=""
          src="/images/image-hero-mobile.jpg"
          width="750"
          height="600"
        />
      </picture>
      <div class="[ main ] [ center ]">
        <div class="[ intro ] [ card isolate ]">
          <div class="flip">
            <h1>Mastercraft Bamboo Monitor Riser</h1>
            <Icon
              alt="Mastercraft"
              name="logo-mastercraft"
              width={56}
              height={56}
            />
          </div>
          <p>
            A beautiful & handcrafted monitor stand to reduce neck and eye
            strain.
          </p>
          <div class="repel">
            <a class="[ cta-button ] [ button ]" href="/pledge">
              Back this project
            </a>
            <form method="post">
              <button
                class="cta-button"
                type="submit"
                name="intent"
                value="bookmark"
              >
                <Icon
                  alt="Bookmark"
                  name="icon-bookmark"
                  width={56}
                  height={56}
                />
                <span aria-hidden="true">Bookmark</span>
              </button>
            </form>
          </div>
        </div>
        <section class="card mt-6" aria-labelledby="progress-heading">
          <h2 id="progress-heading">Goal and progress</h2>
          <ul class="columns" role="list">
            <li class="progress">
              <b>$89,914</b> of $100,000 backed
            </li>
            <li class="progress">
              <b>5,007</b> total backers
            </li>
            <li class="progress">
              <b>56</b> days left
            </li>
          </ul>
          <!-- todo: https://www.radix-ui.com/primitives/docs/components/progress -->
          <progress value="0.66"></progress>
        </section>
        <div class="card mt-6">
          <div class="about">
            <h2>About this project</h2>
            <p>
              The Mastercraft Bamboo Monitor Riser is a sturdy and stylish
              platform that elevates your screen to a more comfortable viewing
              height. Placing your monitor at eye level has the potential to
              improve your posture and make you more comfortable while at work,
              helping you stay focused on the task at hand.
            </p>
            <p>
              Featuring artisan craftsmanship, the simplicity of design creates
              extra desk space below your computer to allow notepads, pens, and
              USB sticks to be stored under the stand.
            </p>
            <h2>Rewards</h2>
            <ul role="list">
              {
                rewards.map((reward) => {
                  const isOutOfStock = !reward.left;
                  return (
                    <li
                      class="card mt-6 first:mt-9"
                      data-disabled={isOutOfStock}
                    >
                      <div class="repel">
                        <h3>{reward.name}</h3>
                        <p class="or-more">Pledge ${reward.min} or more</p>
                      </div>
                      <p>{reward.description}</p>
                      <div class="repel">
                        <p class="left">
                          <strong>{reward.left}</strong> left
                        </p>
                        {isOutOfStock ? (
                          <p class="[ reward-button ] [ button ]" data-disabled>
                            Out of Stock
                          </p>
                        ) : (
                          <a
                            class="[ reward-button ] [ button ]"
                            href={`/pledge?item=${reward.id}`}
                          >
                            Select Reward
                          </a>
                        )}
                      </div>
                    </li>
                  );
                })
              }
            </ul>
          </div>
        </div>
      </div>
      <!-- Selection modal -->
      <!-- todo: https://www.radix-ui.com/primitives/docs/components/dialog -->
      <!-- <article>
        <header>
          <a href="/">
            <img alt="Home" src="/images/icon-close-modal.svg" />
          </a>
        </header>
        <h1>Back this project</h1>
        <p>
          Want to support us in bringing Mastercraft Bamboo Monitor Riser out in
          the world?
        </p>
        <form method="post">
          <ul> -->
      <!-- todo: Merge into `rewards.map` -->
      <!-- <li data-selected="true">
              <h2>
                <button
                type="submit"
                name="reward"
                value="none"
                aria-describedby="reward-none-desc"
                >
                Pledge with no reward
              </button>
            </h2>
            <div class="radio"></div>
            <p id="reward-none-desc">
              Choose to support us without a reward if you simply believe in
              our project. As a backer, you will be signed up to receive
              product updates via email.
            </p>
          </li> -->
      {
        rewards.map((reward) => {
          const descId = `reward-${reward.id}-desc`;
          const quantityId = `reward-${reward.id}-quantity`;
          const disabled = !reward.left;
          return (
            <span />
            // <li data-disabled={disabled}>
            //   <div>
            //     <h2>
            //       <button
            //         type="submit"
            //         name="reward"
            //         value={reward.id}
            //         disabled={disabled}
            //         aria-describedby={descId}
            //       >
            //         {reward.name}
            //       </button>
            //     </h2>
            //     <p>Pledge ${reward.min} or more</p>
            //     <p id={descId}>{reward.description}</p>
            //     <p>
            //       <strong>{reward.left}</strong> left
            //     </p>
            //   </div>
            //   <label for={quantityId}>Enter your pledge</label>
            //   <span>
            //     <span>$</span>
            //     <input
            //       type="number"
            //       name="quantity"
            //       value={reward.min}
            //       min={reward.min}
            //       id={quantityId}
            //     />
            //   </span>
            //   <button type="submit" name="intent" value="pledge">
            //     Continue
            //   </button>
            // </li>
          );
        })
      }
      <!-- </ul>
        </form>
      </article> -->
      <!-- Success modal -->
      <!-- <div>
        <img alt="" src="/images/icon-check.svg" />
        <h1>Thanks for your support!</h1>
        <p>
          Your pledge brings us one step closer to sharing Mastercraft Bamboo
          Monitor Riser worldwide. You will get an email once our campaign is
          completed.
        </p>
        <a href="/">Got it!</a>
      </div> -->
    </main>
  </body>
</html>
